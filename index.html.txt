<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BrÃºjula Interna</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon-192.png" />
  <meta name="theme-color" content="#d1fae5" />
  <style>
    body {
      background-color: #d1fae5;
      color: #064e3b;
      font-family: sans-serif;
      font-size: 1.1rem;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      font-size: 1.8rem;
    }
    .step {
      display: none;
    }
    .step.active {
      display: block;
    }
    input, textarea, select, button {
      width: 100%;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 0.5rem;
      border: none;
      font-size: 1rem;
    }
    button {
      background-color: #10b981;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-top: 1.5rem;
    }
    .branding {
      font-size: 1rem;
      font-weight: bold;
      text-align: center;
      margin-top: 2rem;
      color: #065f46;
    }
    .frase {
      font-style: italic;
      margin-bottom: 1.2rem;
      color: #047857;
    }
    .selector {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <div class="branding">ğŸ§­ BrÃºjula Interna</div>

  <!-- Inicio: Elegir momento -->
  <div class="step active" id="inicio">
    <h1>Â¿DÃ³nde te encuentras en tu dÃ­a?</h1>
    <p class="frase">Escoge tu momento. No importa la hora, importa tu intenciÃ³n.</p>
    <div class="selector">
      <button onclick="iniciarManana()">ğŸŒ… Empezar mi dÃ­a</button>
      <button onclick="iniciarNoche()">ğŸŒ‡ Reflexionar mi dÃ­a</button>
    </div>
  </div>

  <!-- Modo MAÃ‘ANA -->
  <div class="step" id="manana">
    <h1>ğŸŒ Rumbo del dÃ­a</h1>
    <p class="frase" id="fraseManana"></p>
    <label>ğŸ¯ Â¿QuÃ© 3 cosas quiero hacer hoy?</label>
    <input type="text" id="m1" placeholder="Ej: Salir a caminar" />
    <input type="text" id="m2" placeholder="Ej: Leer 10 minutos" />
    <input type="text" id="m3" placeholder="Ej: Hablar con alguien con calma" />
    <label>ğŸŒ€ Â¿CÃ³mo me siento al comenzar?</label>
    <select id="energia">
      <option value="Alta">Alta âš¡</option>
      <option value="Media">Media ğŸ”„</option>
      <option value="Baja">Baja ğŸŒ±</option>
    </select>
    <label>ğŸ’š Â¿QuÃ© actitud quiero cultivar?</label>
    <input type="text" id="actitud" placeholder="Ej: Amabilidad / Claridad / Paciencia" />
    <button onclick="guardarManana()">Guardar mi rumbo</button>
  </div>
  <!-- Modo NOCHE -->
  <div class="step" id="noche">
    <h1>ğŸŒ™ BitÃ¡cora del dÃ­a</h1>
    <p class="frase" id="fraseNoche"></p>
    <label>ğŸŒŸ Â¿QuÃ© hice hoy que me gustÃ³?</label>
    <textarea id="logro" rows="2"></textarea>
    <label>ğŸ§± Â¿QuÃ© me costÃ³ mÃ¡s?</label>
    <textarea id="dificil" rows="2"></textarea>
    <label>ğŸ’­ Â¿QuÃ© aprendÃ­ o me repito con cariÃ±o?</label>
    <textarea id="mensaje" rows="2" placeholder="Ej: Hice lo que pude. Estoy avanzando."></textarea>
    <button onclick="guardarNoche()">Guardar mi reflexiÃ³n</button>
  </div>

  <!-- Resultado -->
  <div class="step" id="resultado">
    <h1>ğŸ“– Tu registro de hoy</h1>
    <div id="resumen"></div>
    <p class="frase" id="fraseFinal"></p>
    <button onclick="reiniciar()">Registrar otro momento</button>
  </div>

  <script>
    const frasesManana = [
      "Hoy no tienes que hacerlo todo. Solo avanzar con intenciÃ³n.",
      "Un dÃ­a amable comienza con una pausa consciente.",
      "EstÃ¡s trazando tu rumbo. Cada paso importa.",
      "Iniciar con claridad es un acto de cuidado personal."
    ];

    const frasesNoche = [
      "Hoy ya forma parte de tu camino.",
      "Todo lo que hiciste (o no), te enseÃ±Ã³ algo.",
      "Cerrar el dÃ­a es tambiÃ©n un acto de amor propio.",
      "Tu brÃºjula sigue activa, incluso cuando descansas."
    ];

    const frasesFinales = [
      "EstÃ¡s aprendiendo a estar contigo. Ese es el verdadero avance.",
      "No se trata de hacerlo perfecto, sino de estar presente.",
      "MaÃ±ana es otra oportunidad para cuidar tu direcciÃ³n.",
      "Lo que registras hoy serÃ¡ tu guÃ­a silenciosa de maÃ±ana."
    ];

    function mostrarPaso(id) {
      document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function iniciarManana() {
      document.getElementById('fraseManana').textContent = frasesManana[Math.floor(Math.random() * frasesManana.length)];
      mostrarPaso('manana');
    }

    function iniciarNoche() {
      document.getElementById('fraseNoche').textContent = frasesNoche[Math.floor(Math.random() * frasesNoche.length)];
      mostrarPaso('noche');
    }

    function guardarManana() {
      const m1 = document.getElementById('m1').value;
      const m2 = document.getElementById('m2').value;
      const m3 = document.getElementById('m3').value;
      const energia = document.getElementById('energia').value;
      const actitud = document.getElementById('actitud').value;

      const resumen = `
        <p>ğŸ¯ <strong>Objetivos:</strong><br>â€“ ${m1}<br>â€“ ${m2}<br>â€“ ${m3}</p>
        <p>ğŸŒ€ <strong>EnergÃ­a:</strong> ${energia}</p>
        <p>ğŸ’š <strong>Actitud:</strong> ${actitud}</p>
      `;
      mostrarResumen(resumen);
    }

    function guardarNoche() {
      const l = document.getElementById('logro').value.trim();
      const d = document.getElementById('dificil').value.trim();
      const m = document.getElementById('mensaje').value.trim();

      let emojiLogro = l ? "ğŸŒŸ" : "ğŸ«¥";
      let emojiDificil = /frustrado|nada|cansado|dificil|ansiedad/i.test(d) ? "ğŸŒ§ï¸" : "ğŸ§©";
      let emojiMensaje = m ? "ğŸ’­" : "ğŸ¤";

      const resumen = `
        <p>${emojiLogro} <strong>Logro:</strong> ${l || "No registrado."}</p>
        <p>${emojiDificil} <strong>Dificultad:</strong> ${d || "No registrado."}</p>
        <p>${emojiMensaje} <strong>Mensaje amable:</strong> ${m || "Sin mensaje, pero estÃ¡s aquÃ­."}</p>
      `;

      mostrarResumen(resumen);
    }

    function mostrarResumen(texto) {
      document.getElementById('resumen').innerHTML = texto;
      document.getElementById('fraseFinal').textContent = frasesFinales[Math.floor(Math.random() * frasesFinales.length)];
      localStorage.setItem('brujula-interna-ultimo', texto);
      mostrarPaso('resultado');
    }

    function reiniciar() {
      mostrarPaso('inicio');
    }

    window.onload = () => {
      mostrarPaso('inicio');
    };
  </script>
</body>
</html>
